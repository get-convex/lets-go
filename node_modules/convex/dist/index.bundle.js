"use strict";var convex=(()=>{var ir=Object.create;var Ue=Object.defineProperty;var ar=Object.getOwnPropertyDescriptor;var or=Object.getOwnPropertyNames;var ur=Object.getPrototypeOf,cr=Object.prototype.hasOwnProperty;var bt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),dr=(r,e)=>{for(var t in e)Ue(r,t,{get:e[t],enumerable:!0})},xt=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of or(e))!cr.call(r,s)&&s!==t&&Ue(r,s,{get:()=>e[s],enumerable:!(n=ar(e,s))||n.enumerable});return r};var ot=(r,e,t)=>(t=r!=null?ir(ur(r)):{},xt(e||!r||!r.__esModule?Ue(t,"default",{value:r,enumerable:!0}):t,r)),hr=r=>xt(Ue({},"__esModule",{value:!0}),r);var ct=bt(Ze=>{"use strict";Ze.byteLength=fr;Ze.toByteArray=yr;Ze.fromByteArray=vr;var B=[],F=[],lr=typeof Uint8Array<"u"?Uint8Array:Array,ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ce=0,Tt=ut.length;ce<Tt;++ce)B[ce]=ut[ce],F[ut.charCodeAt(ce)]=ce;var ce,Tt;F["-".charCodeAt(0)]=62;F["_".charCodeAt(0)]=63;function kt(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function fr(r){var e=kt(r),t=e[0],n=e[1];return(t+n)*3/4-n}function pr(r,e,t){return(e+t)*3/4-t}function yr(r){var e,t=kt(r),n=t[0],s=t[1],i=new lr(pr(r,n,s)),a=0,o=s>0?n-4:n,u;for(u=0;u<o;u+=4)e=F[r.charCodeAt(u)]<<18|F[r.charCodeAt(u+1)]<<12|F[r.charCodeAt(u+2)]<<6|F[r.charCodeAt(u+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=F[r.charCodeAt(u)]<<2|F[r.charCodeAt(u+1)]>>4,i[a++]=e&255),s===1&&(e=F[r.charCodeAt(u)]<<10|F[r.charCodeAt(u+1)]<<4|F[r.charCodeAt(u+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function mr(r){return B[r>>18&63]+B[r>>12&63]+B[r>>6&63]+B[r&63]}function gr(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(mr(n));return s.join("")}function vr(r){for(var e,t=r.length,n=t%3,s=[],i=16383,a=0,o=t-n;a<o;a+=i)s.push(gr(r,a,a+i>o?o:a+i));return n===1?(e=r[t-1],s.push(B[e>>2]+B[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(B[e>>10]+B[e>>4&63]+B[e<<2&63]+"=")),s.join("")}});var nr=bt((Qe,rr)=>{"use strict";var Qn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof te<"u")return te;throw new Error("unable to locate global object")},te=Qn();rr.exports=Qe=te.fetch;te.fetch&&(Qe.default=te.fetch.bind(te));Qe.Headers=te.Headers;Qe.Request=te.Request;Qe.Response=te.Response});var Vn={};dr(Vn,{ConvexHttpClient:()=>at,InternalConvexClient:()=>it});var St="0.1.6";var re=ot(ct(),1);var q=null;try{q=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function T(r,e,t){this.low=r|0,this.high=e|0,this.unsigned=!!t}T.prototype.__isLong__;Object.defineProperty(T.prototype,"__isLong__",{value:!0});function A(r){return(r&&r.__isLong__)===!0}function Mt(r){var e=Math.clz32(r&-r);return r?31-e:e}T.isLong=A;var It={},Et={};function de(r,e){var t,n,s;return e?(r>>>=0,(s=0<=r&&r<256)&&(n=Et[r],n)?n:(t=x(r,0,!0),s&&(Et[r]=t),t)):(r|=0,(s=-128<=r&&r<128)&&(n=It[r],n)?n:(t=x(r,r<0?-1:0,!1),s&&(It[r]=t),t))}T.fromInt=de;function C(r,e){if(isNaN(r))return e?H:j;if(e){if(r<0)return H;if(r>=Rt)return Ct}else{if(r<=-Nt)return R;if(r+1>=Nt)return qt}return r<0?C(-r,e).neg():x(r%ge|0,r/ge|0,e)}T.fromNumber=C;function x(r,e,t){return new T(r,e,t)}T.fromBits=x;var ze=Math.pow;function ht(r,e,t){if(r.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e?H:j;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=r.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return ht(r.substring(1),e,t).neg();for(var s=C(ze(t,8)),i=j,a=0;a<r.length;a+=8){var o=Math.min(8,r.length-a),u=parseInt(r.substring(a,a+o),t);if(o<8){var d=C(ze(t,o));i=i.mul(d).add(C(u))}else i=i.mul(s),i=i.add(C(u))}return i.unsigned=e,i}T.fromString=ht;function U(r,e){return typeof r=="number"?C(r,e):typeof r=="string"?ht(r,e):x(r.low,r.high,typeof e=="boolean"?e:r.unsigned)}T.fromValue=U;var At=1<<16,wr=1<<24,ge=At*At,Rt=ge*ge,Nt=Rt/2,Ot=de(wr),j=de(0);T.ZERO=j;var H=de(0,!0);T.UZERO=H;var me=de(1);T.ONE=me;var Ft=de(1,!0);T.UONE=Ft;var dt=de(-1);T.NEG_ONE=dt;var qt=x(-1,2147483647,!1);T.MAX_VALUE=qt;var Ct=x(-1,-1,!0);T.MAX_UNSIGNED_VALUE=Ct;var R=x(0,-2147483648,!1);T.MIN_VALUE=R;var c=T.prototype;c.toInt=function(){return this.unsigned?this.low>>>0:this.low};c.toNumber=function(){return this.unsigned?(this.high>>>0)*ge+(this.low>>>0):this.high*ge+(this.low>>>0)};c.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(R)){var t=C(e),n=this.div(t),s=n.mul(t).sub(this);return n.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=C(ze(e,6),this.unsigned),a=this,o="";;){var u=a.div(i),d=a.sub(u.mul(i)).toInt()>>>0,f=d.toString(e);if(a=u,a.isZero())return f+o;for(;f.length<6;)f="0"+f;o=""+f+o}};c.getHighBits=function(){return this.high};c.getHighBitsUnsigned=function(){return this.high>>>0};c.getLowBits=function(){return this.low};c.getLowBitsUnsigned=function(){return this.low>>>0};c.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1};c.isZero=function(){return this.high===0&&this.low===0};c.eqz=c.isZero;c.isNegative=function(){return!this.unsigned&&this.high<0};c.isPositive=function(){return this.unsigned||this.high>=0};c.isOdd=function(){return(this.low&1)===1};c.isEven=function(){return(this.low&1)===0};c.equals=function(e){return A(e)||(e=U(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};c.eq=c.equals;c.notEquals=function(e){return!this.eq(e)};c.neq=c.notEquals;c.ne=c.notEquals;c.lessThan=function(e){return this.comp(e)<0};c.lt=c.lessThan;c.lessThanOrEqual=function(e){return this.comp(e)<=0};c.lte=c.lessThanOrEqual;c.le=c.lessThanOrEqual;c.greaterThan=function(e){return this.comp(e)>0};c.gt=c.greaterThan;c.greaterThanOrEqual=function(e){return this.comp(e)>=0};c.gte=c.greaterThanOrEqual;c.ge=c.greaterThanOrEqual;c.compare=function(e){if(A(e)||(e=U(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};c.comp=c.compare;c.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(me)};c.neg=c.negate;c.add=function(e){A(e)||(e=U(e));var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,o=e.high&65535,u=e.low>>>16,d=e.low&65535,f=0,b=0,w=0,I=0;return I+=i+d,w+=I>>>16,I&=65535,w+=s+u,b+=w>>>16,w&=65535,b+=n+o,f+=b>>>16,b&=65535,f+=t+a,f&=65535,x(w<<16|I,f<<16|b,this.unsigned)};c.subtract=function(e){return A(e)||(e=U(e)),this.add(e.neg())};c.sub=c.subtract;c.multiply=function(e){if(this.isZero())return this;if(A(e)||(e=U(e)),q){var t=q.mul(this.low,this.high,e.low,e.high);return x(t,q.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?H:j;if(this.eq(R))return e.isOdd()?R:j;if(e.eq(R))return this.isOdd()?R:j;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ot)&&e.lt(Ot))return C(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,s=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,u=e.high&65535,d=e.low>>>16,f=e.low&65535,b=0,w=0,I=0,je=0;return je+=a*f,I+=je>>>16,je&=65535,I+=i*f,w+=I>>>16,I&=65535,I+=a*d,w+=I>>>16,I&=65535,w+=s*f,b+=w>>>16,w&=65535,w+=i*d,b+=w>>>16,w&=65535,w+=a*u,b+=w>>>16,w&=65535,b+=n*f+s*d+i*u+a*o,b&=65535,x(I<<16|je,b<<16|w,this.unsigned)};c.mul=c.multiply;c.divide=function(e){if(A(e)||(e=U(e)),e.isZero())throw Error("division by zero");if(q){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?q.div_u:q.div_s)(this.low,this.high,e.low,e.high);return x(t,q.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?H:j;var n,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return H;if(e.gt(this.shru(1)))return Ft;i=H}else{if(this.eq(R)){if(e.eq(me)||e.eq(dt))return R;if(e.eq(R))return me;var a=this.shr(1);return n=a.div(e).shl(1),n.eq(j)?e.isNegative()?me:dt:(s=this.sub(e.mul(n)),i=n.add(s.div(e)),i)}else if(e.eq(R))return this.unsigned?H:j;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=j}for(s=this;s.gte(e);){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:ze(2,o-48),d=C(n),f=d.mul(e);f.isNegative()||f.gt(s);)n-=u,d=C(n,this.unsigned),f=d.mul(e);d.isZero()&&(d=me),i=i.add(d),s=s.sub(f)}return i};c.div=c.divide;c.modulo=function(e){if(A(e)||(e=U(e)),q){var t=(this.unsigned?q.rem_u:q.rem_s)(this.low,this.high,e.low,e.high);return x(t,q.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};c.mod=c.modulo;c.rem=c.modulo;c.not=function(){return x(~this.low,~this.high,this.unsigned)};c.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};c.clz=c.countLeadingZeros;c.countTrailingZeros=function(){return this.low?Mt(this.low):Mt(this.high)+32};c.ctz=c.countTrailingZeros;c.and=function(e){return A(e)||(e=U(e)),x(this.low&e.low,this.high&e.high,this.unsigned)};c.or=function(e){return A(e)||(e=U(e)),x(this.low|e.low,this.high|e.high,this.unsigned)};c.xor=function(e){return A(e)||(e=U(e)),x(this.low^e.low,this.high^e.high,this.unsigned)};c.shiftLeft=function(e){return A(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?x(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):x(0,this.low<<e-32,this.unsigned)};c.shl=c.shiftLeft;c.shiftRight=function(e){return A(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?x(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):x(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};c.shr=c.shiftRight;c.shiftRightUnsigned=function(e){return A(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?x(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?x(this.high,0,this.unsigned):x(this.high>>>e-32,0,this.unsigned)};c.shru=c.shiftRightUnsigned;c.shr_u=c.shiftRightUnsigned;c.rotateLeft=function(e){var t;return A(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?x(this.high,this.low,this.unsigned):e<32?(t=32-e,x(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,x(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};c.rotl=c.rotateLeft;c.rotateRight=function(e){var t;return A(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?x(this.high,this.low,this.unsigned):e<32?(t=32-e,x(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,x(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};c.rotr=c.rotateRight;c.toSigned=function(){return this.unsigned?x(this.low,this.high,!1):this};c.toUnsigned=function(){return this.unsigned?this:x(this.low,this.high,!0)};c.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};c.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};c.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};T.fromBytes=function(e,t,n){return n?T.fromBytesLE(e,t):T.fromBytesBE(e,t)};T.fromBytesLE=function(e,t){return new T(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};T.fromBytesBE=function(e,t){return new T(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var he=T;var Pt=!0,_r=BigInt("-9223372036854775808"),br=BigInt("9223372036854775807"),ne=class{constructor(e){this.encoded=e}equals(e){return e?this.toString()==e.toString():!1}static fromJSON(e){if(typeof e.$id!="string")throw new Error(`Object ${JSON.stringify(e)} isn't a valid Id`);return new ne(e.$id)}toJSON(){return{$id:this.encoded}}static fromString(e){return new ne(e)}toString(){return this.encoded}};function Vt(r){return Number.isNaN(r)||!Number.isFinite(r)||Object.is(r,-0)}function xr(r){let e=he.fromString(r.toString(),!1).toBytesLE();return re.fromByteArray(new Uint8Array(e))}function Sr(r){let e=re.toByteArray(r);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return BigInt(he.fromBytesLE(Array.from(e),!1).toString())}var Qt=64,Tr=/^_+$/,kr=/^[a-zA-Z_][a-zA-Z0-9_]{0,63}$/;function $t(r){if(r.length===0)throw new Error("Empty field names are disallowed.");if(r.length>Qt)throw new Error(`Field name ${r} exceeds maximum field name length ${Qt}.`);if(r.startsWith("$"))throw new Error(`Field name ${r} starts with a '$', which is reserved.`);if(Tr.test(r))throw new Error(`Field name ${r} can't exclusively be underscores.`);if(!kr.test(r))throw new Error(`Field name ${r} must only contain alphanumeric characters or underscores and can't start with a number.`)}function ve(r){if(r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string")return r;if(r instanceof Array)return r.map(ve);if(typeof r!="object")throw new Error(`Unexpected type of ${r}`);let e=Object.entries(r);if(e.length===1){let n=e[0][0];if(n==="$id"||n==="$weakRef"||n==="$strongRef")return ne.fromJSON(r);if(n==="$bytes"){if(typeof r.$bytes!="string")throw new Error(`Malformed $bytes field on ${r}`);return re.toByteArray(r.$bytes).buffer}if(n==="$integer"){if(typeof r.$integer!="string")throw new Error(`Malformed $integer field on ${r}`);return Sr(r.$integer)}if(n==="$float"){if(typeof r.$float!="string")throw new Error(`Malformed $float field on ${r}`);let s=re.toByteArray(r.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);let a=new DataView(s.buffer).getFloat64(0,Pt);if(!Vt(a))throw new Error(`Float ${a} should be encoded as a number`);return a}if(n==="$set"){if(!(r.$set instanceof Array))throw new Error(`Malformed $set field on ${r}`);return new Set(r.$set.map(ve))}if(n==="$map"){if(!(r.$map instanceof Array))throw new Error(`Malformed $map field on ${r}`);let s=new Map;for(let i of r.$map){if(!(i instanceof Array)||i.length!==2)throw new Error(`Malformed pair in $map ${r}`);let a=ve(i[0]),o=ve(i[1]);s.set(a,o)}return s}}let t={};for(let[n,s]of Object.entries(r))$t(n),t[n]=ve(s);return t}function se(r){return ve(r)}function we(r,e,t){if(r===void 0)throw new Error(`undefined is not a valid Convex value (present at path ${t} in original object ${JSON.stringify(e)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);if(r===null)return r;if(r instanceof ne)return r.toJSON();if(typeof r=="bigint"){if(r<_r||br<r)throw new Error(`BigInt ${r} does not fit into a 64-bit signed integer.`);return{$integer:xr(r)}}if(typeof r=="number")if(Vt(r)){let i=new ArrayBuffer(8);return new DataView(i).setFloat64(0,r,Pt),{$float:re.fromByteArray(new Uint8Array(i))}}else return r;if(typeof r=="boolean"||typeof r=="string")return r;if(r instanceof ArrayBuffer)return{$bytes:re.fromByteArray(new Uint8Array(r))};if(r instanceof Array)return r.map((i,a)=>we(i,e,t+`[${a}]`));if(r instanceof Set)return{$set:[...r].map((i,a)=>we(i,e,t+`.keys()[${a}]`))};if(r instanceof Map)return{$map:[...r].map(([i,a],o)=>{let u=we(i,e,t+`.keys()[${o}]`),d=we(a,e,t+`.values()[${o}]`);return[u,d]})};if(typeof r!="object")throw new Error(`${r} is not a supported Convex type (present at path ${t} in original object ${JSON.stringify(e)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);let n=Object.getPrototypeOf(r);if(n!==null&&n!==Object.prototype)throw new Error(`${r} is not a supported Convex type (present at path ${t} in original object ${JSON.stringify(e)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);let s={};for(let[i,a]of Object.entries(r))$t(i),s[i]=we(a,e,t+`.${i}`);return s}function Z(r){return we(r,r,"")}var lt="0.1.6";var ft=560;function Be(r){let e=r.split(":"),t,n;return e.length==1?(t=e[0],n="default"):(t=e.slice(0,e.length-1).join(":"),n=e[e.length-1]),t.endsWith(".js")||(t=`${t}.js`),`${t}:${n}`}function ie(r,e){return JSON.stringify({udfPath:Be(r),args:Z(e)})}var De=class{constructor(){this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map}subscribe(e,t){let n=Be(e),s=ie(n,t),i=this.querySet.get(s);if(i!==void 0)return i.numSubscribers+=1,{queryToken:s,modification:null,unsubscribe:()=>this.removeSubscriber(s)};{let a=this.nextQueryId++,o={id:a,canonicalizedUdfPath:n,args:t,numSubscribers:1};this.querySet.set(s,o),this.queryIdToToken.set(a,s);let u=this.querySetVersion,d=++this.querySetVersion,f={type:"Add",queryId:a,udfPath:n,args:t.map(Z)};return{queryToken:s,modification:{type:"ModifyQuerySet",baseVersion:u,newVersion:d,modifications:[f]},unsubscribe:()=>this.removeSubscriber(s)}}}queryId(e,t){let n=Be(e),s=ie(n,t),i=this.querySet.get(s);return i!==void 0?i.id:null}setAuth(e){this.auth={tokenType:"User",value:e};let t=this.identityVersion++;return{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e){this.auth={tokenType:"Admin",value:e};let t=this.identityVersion++;return{type:"Authenticate",baseVersion:t,...this.auth}}clearAuth(){this.auth=void 0;let e=this.identityVersion++;return{type:"Authenticate",tokenType:"None",baseVersion:e}}queryPath(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}restart(){let e=[];for(let s of this.querySet.values()){let i={type:"Add",queryId:s.id,udfPath:s.canonicalizedUdfPath,args:s.args.map(Z)};e.push(i)}this.querySetVersion=1;let t={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:e};if(!this.auth)return this.identityVersion=0,[t,void 0];let n={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[t,n]}removeSubscriber(e){let t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id);let n=this.querySetVersion,s=++this.querySetVersion,i={type:"Remove",queryId:t.id};return{type:"ModifyQuerySet",baseVersion:n,newVersion:s,modifications:[i]}}}};var Mr="color:rgb(0, 145, 255)";function G(r,e,t,n){let s=e==="query"?"Q":"M";r=="info"?console.log(`%c[CONVEX ${s}(${t})] ${n}`,Mr):console.error(`[CONVEX ${s}(${t})] ${n}`)}function Lt(r){let e=`[CONVEX FATAL ERROR] ${r}`;return console.error(e),new Error(e)}function le(r,e,t){let n=r==="query"?"Q":"M";return new Error(`[CONVEX ${n}(${e})] ${t}`)}var We=class{constructor(){this.inflightMutations=new Map}request(e,t,n){let s={type:"Mutation",mutationId:n,udfPath:e,args:Z(t)},i=new Promise((a,o)=>{this.inflightMutations.set(n,{message:s,status:{status:"Requested",onResult:a,onFailure:o}})});return{message:s,result:i}}onResponse(e){let t=this.inflightMutations.get(e.mutationId);if(t===void 0)return null;if(t.status.status==="Requested"){let n=t.message.udfPath;for(let s of e.logLines)G("info","mutation",n,s);return e.success?(t.status.onResult(se(e.result)),t.status={status:"Committed",ts:e.ts},null):(this.inflightMutations.delete(e.mutationId),G("error","mutation",n,e.result),t.status.onFailure(le("mutation",n,e.result)),e.mutationId)}return null}removeCompletedMutations(e){let t=new Set;for(let[n,s]of this.inflightMutations.entries()){let i=s.status;i.status=="Committed"&&i.ts.lessThanOrEqual(e)&&(t.add(n),this.inflightMutations.delete(n))}return t}hasUncommittedMutations(){for(let e of this.inflightMutations.values())if(e.status.status==="Requested")return!0;return!1}restart(){let e=[];for(let t of this.inflightMutations.values())e.push(t.message);return e}};var Je=class{constructor(e){this.queryResults=e,this.modifiedQueries=[]}getQuery(e,t){let n=this.queryResults.get(ie(e,t));if(n===void 0)return;let s=n.result;if(s!==void 0)return s.success?s.value:void 0}setQuery(e,t,n){let s=ie(e,t),i;n===void 0?i=void 0:i={success:!0,value:n};let a={udfPath:e,args:t,result:i};this.queryResults.set(s,a),this.modifiedQueries.push(s)}},He=class{constructor(){this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(a=>!t.has(a.mutationId));let n=this.queryResults;this.queryResults=new Map(e);let s=new Je(this.queryResults);for(let a of this.optimisticUpdates)a.update(s);let i=[];for(let[a,o]of this.queryResults){let u=n.get(a);(u===void 0||u.result!==o.result)&&i.push(a)}return i}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});let n=new Je(this.queryResults);return e(n),n.modifiedQueries}queryResult(e){let t=this.queryResults.get(e);if(t===void 0)return;let n=t.result;if(n!==void 0){if(n.success)return n.value;throw le("query",t.udfPath,n.errorMessage)}}};var Pe=class{constructor(e){this.version={querySet:0,ts:he.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e}transition(e){let t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts}:${t.querySet}`);for(let n of e.modifications)switch(n.type){case"QueryUpdated":{let s=this.queryPath(n.queryId);if(s)for(let a of n.logLines)G("info","query",s,a);let i=se(n.value??null);this.remoteQuerySet.set(n.queryId,{success:!0,value:i});break}case"QueryFailed":{let s=this.queryPath(n.queryId);if(s)for(let i of n.logLines)G("info","query",s,i);this.remoteQuerySet.set(n.queryId,{success:!1,errorMessage:n.errorMessage});break}case"QueryRemoved":{this.remoteQuerySet.delete(n.queryId);break}default:{let s=n;throw new Error(`Invalid modification ${n}`)}}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}};var tt=ot(ct(),1);var M;(function(r){function e(n){throw new Error}r.assertNever=e,r.arrayToEnum=n=>{let s={};for(let i of n)s[i]=i;return s},r.getValidEnumValues=n=>{let s=r.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),i={};for(let a of s)i[a]=n[a];return r.objectValues(i)},r.objectValues=n=>r.objectKeys(n).map(function(s){return n[s]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&s.push(i);return s},r.find=(n,s)=>{for(let i of n)if(s(i))return i},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function t(n,s=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}r.joinValues=t})(M||(M={}));var p=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ae=r=>{switch(typeof r){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(r)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"object":return Array.isArray(r)?p.array:r===null?p.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?p.promise:typeof Map<"u"&&r instanceof Map?p.map:typeof Set<"u"&&r instanceof Set?p.set:typeof Date<"u"&&r instanceof Date?p.date:p.object;default:return p.unknown}},l=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Ir=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),z=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let o=n,u=0;for(;u<a.path.length;){let d=a.path[u];u===a.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(a))):o[d]=o[d]||{_errors:[]},o=o[d],u++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,null,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};z.create=r=>new z(r);var Ve=(r,e)=>{let t;switch(r.code){case l.invalid_type:r.received===p.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case l.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected)}`;break;case l.unrecognized_keys:t=`Unrecognized key(s) in object: ${M.joinValues(r.keys,", ")}`;break;case l.invalid_union:t="Invalid input";break;case l.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${M.joinValues(r.options)}`;break;case l.invalid_enum_value:t=`Invalid enum value. Expected ${M.joinValues(r.options)}, received '${r.received}'`;break;case l.invalid_arguments:t="Invalid function arguments";break;case l.invalid_return_type:t="Invalid function return type";break;case l.invalid_date:t="Invalid date";break;case l.invalid_string:r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case l.too_small:r.type==="array"?t=`Array must contain ${r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be greater than ${r.inclusive?"or equal to ":""}${r.minimum}`:t="Invalid input";break;case l.too_big:r.type==="array"?t=`Array must contain ${r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be less than ${r.inclusive?"or equal to ":""}${r.maximum}`:t="Invalid input";break;case l.custom:t="Invalid input";break;case l.invalid_intersection_types:t="Intersection results could not be merged";break;case l.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;default:t=e.defaultError,M.assertNever(r)}return{message:t}},$e=Ve,Er=r=>{$e=r},Ge=r=>{let{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],a={...s,path:i},o="",u=n.filter(d=>!!d).slice().reverse();for(let d of u)o=d(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},Ar=[];function y(r,e){let t=Ge({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,$e,Ve].filter(n=>!!n)});r.common.issues.push(t)}var N=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let s of t){if(s.status==="aborted")return g;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let s of t)n.push({key:await s.key,value:await s.value});return N.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let s of t){let{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return g;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},g=Object.freeze({status:"aborted"}),Nr=r=>({status:"dirty",value:r}),O=r=>({status:"valid",value:r}),pt=r=>r.status==="aborted",yt=r=>r.status==="dirty",Xe=r=>r.status==="valid",mt=r=>typeof Promise!==void 0&&r instanceof Promise,S;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(S||(S={}));var P=class{constructor(e,t,n,s){this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._path.concat(this._key)}},jt=(r,e)=>{if(Xe(e))return{success:!0,data:e.value};{if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");let t=new z(r.common.issues);return{success:!1,error:t}}};function _(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid" or "required" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"&&n?{message:n}:r.invalid_type_error?{message:r.invalid_type_error}:{message:o.defaultError},description:s}}var v=class{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ae(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new N,ctx:{common:e.parent.common,data:e.data,parsedType:ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(mt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ae(e)},i=this._parseSync({data:e,path:s.path,parent:s});return jt(s,i)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ae(e)},s=this._parse({data:e,path:[],parent:n}),i=await(mt(s)?s:Promise.resolve(s));return jt(n,i)}refine(e,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{let a=e(s),o=()=>i.addIssue({code:l.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new L({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return Q.create(this)}nullable(){return ee.create(this)}nullish(){return this.optional().nullable()}array(){return V.create(this)}promise(){return ue.create(this)}or(e){return fe.create([this,e])}and(e){return pe.create(this,e)}transform(e){return new L({schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Le({innerType:this,defaultValue:t,typeName:m.ZodDefault})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Or=/^c[^\s-]{8,}$/i,Rr=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Fr=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,W=class extends v{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(s=>e.test(s),{validation:t,code:l.invalid_string,...S.errToObj(n)}),this.nonempty=e=>this.min(1,S.errToObj(e)),this.trim=()=>new W({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==p.string){let i=this._getOrReturnCtx(e);return y(i,{code:l.invalid_type,expected:p.string,received:i.parsedType}),g}let n=new N,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:l.too_small,minimum:i.value,type:"string",inclusive:!0,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:l.too_big,maximum:i.value,type:"string",inclusive:!0,message:i.message}),n.dirty());else if(i.kind==="email")Fr.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"email",code:l.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Rr.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"uuid",code:l.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Or.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid",code:l.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),y(s,{validation:"url",code:l.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"regex",code:l.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():M.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...S.errToObj(e)})}url(e){return this._addCheck({kind:"url",...S.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...S.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...S.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...S.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...S.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...S.errToObj(t)})}length(e,t){return this.min(e,t).max(e,t)}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=-1/0;return this._def.checks.map(t=>{t.kind==="min"&&(e===null||t.value>e)&&(e=t.value)}),e}get maxLength(){let e=null;return this._def.checks.map(t=>{t.kind==="max"&&(e===null||t.value<e)&&(e=t.value)}),e}};W.create=r=>new W({checks:[],typeName:m.ZodString,..._(r)});function qr(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}var X=class extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==p.number){let i=this._getOrReturnCtx(e);return y(i,{code:l.invalid_type,expected:p.number,received:i.parsedType}),g}let n,s=new N;for(let i of this._def.checks)i.kind==="int"?M.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:l.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:l.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:l.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?qr(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),y(n,{code:l.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):M.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,n,s){return new X({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:S.toString(s)}]})}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}};X.create=r=>new X({checks:[],typeName:m.ZodNumber,..._(r)});var be=class extends v{_parse(e){if(this._getType(e)!==p.bigint){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.bigint,received:n.parsedType}),g}return O(e.data)}};be.create=r=>new be({typeName:m.ZodBigInt,..._(r)});var xe=class extends v{_parse(e){if(this._getType(e)!==p.boolean){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.boolean,received:n.parsedType}),g}return O(e.data)}};xe.create=r=>new xe({typeName:m.ZodBoolean,..._(r)});var Se=class extends v{_parse(e){if(this._getType(e)!==p.date){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.date,received:n.parsedType}),g}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_date}),g}return{status:"valid",value:new Date(e.data.getTime())}}};Se.create=r=>new Se({typeName:m.ZodDate,..._(r)});var Te=class extends v{_parse(e){if(this._getType(e)!==p.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.undefined,received:n.parsedType}),g}return O(e.data)}};Te.create=r=>new Te({typeName:m.ZodUndefined,..._(r)});var ke=class extends v{_parse(e){if(this._getType(e)!==p.null){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.null,received:n.parsedType}),g}return O(e.data)}};ke.create=r=>new ke({typeName:m.ZodNull,..._(r)});var oe=class extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return O(e.data)}};oe.create=r=>new oe({typeName:m.ZodAny,..._(r)});var D=class extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return O(e.data)}};D.create=r=>new D({typeName:m.ZodUnknown,..._(r)});var J=class extends v{_parse(e){let t=this._getOrReturnCtx(e);return y(t,{code:l.invalid_type,expected:p.never,received:t.parsedType}),g}};J.create=r=>new J({typeName:m.ZodNever,..._(r)});var Me=class extends v{_parse(e){if(this._getType(e)!==p.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.void,received:n.parsedType}),g}return O(e.data)}};Me.create=r=>new Me({typeName:m.ZodVoid,..._(r)});var V=class extends v{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==p.array)return y(t,{code:l.invalid_type,expected:p.array,received:t.parsedType}),g;if(s.minLength!==null&&t.data.length<s.minLength.value&&(y(t,{code:l.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(y(t,{code:l.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all(t.data.map((a,o)=>s.type._parseAsync(new P(t,a,t.path,o)))).then(a=>N.mergeArray(n,a));let i=t.data.map((a,o)=>s.type._parseSync(new P(t,a,t.path,o)));return N.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new V({...this._def,minLength:{value:e,message:S.toString(t)}})}max(e,t){return new V({...this._def,maxLength:{value:e,message:S.toString(t)}})}length(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};V.create=(r,e)=>new V({type:r,minLength:null,maxLength:null,typeName:m.ZodArray,..._(e)});var Ye;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Ye||(Ye={}));var Ut=r=>e=>new k({...r,shape:()=>({...r.shape(),...e})});function _e(r){if(r instanceof k){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=Q.create(_e(n))}return new k({...r._def,shape:()=>e})}else return r instanceof V?V.create(_e(r.element)):r instanceof Q?Q.create(_e(r.unwrap())):r instanceof ee?ee.create(_e(r.unwrap())):r instanceof $?$.create(r.items.map(e=>_e(e))):r}var k=class extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Ut(this._def),this.extend=Ut(this._def)}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=M.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==p.object){let d=this._getOrReturnCtx(e);return y(d,{code:l.invalid_type,expected:p.object,received:d.parsedType}),g}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];for(let d in s.data)a.includes(d)||o.push(d);let u=[];for(let d of a){let f=i[d],b=s.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new P(s,b,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof J){let d=this._def.unknownKeys;if(d==="passthrough")for(let f of o)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")o.length>0&&(y(s,{code:l.unrecognized_keys,keys:o}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let f of o){let b=s.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new P(s,b,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let d=[];for(let f of u){let b=await f.key;d.push({key:b,value:await f.value,alwaysSet:f.alwaysSet})}return d}).then(d=>N.mergeObjectSync(n,d)):N.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new k({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,a,o;let u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=S.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new k({...this._def,unknownKeys:"strip"})}passthrough(){return new k({...this._def,unknownKeys:"passthrough"})}setKey(e,t){return this.augment({[e]:t})}merge(e){return new k({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Ye.mergeShapes(this._def.shape(),e._def.shape()),typeName:m.ZodObject})}catchall(e){return new k({...this._def,catchall:e})}pick(e){let t={};return M.objectKeys(e).map(n=>{this.shape[n]&&(t[n]=this.shape[n])}),new k({...this._def,shape:()=>t})}omit(e){let t={};return M.objectKeys(this.shape).map(n=>{M.objectKeys(e).indexOf(n)===-1&&(t[n]=this.shape[n])}),new k({...this._def,shape:()=>t})}deepPartial(){return _e(this)}partial(e){let t={};if(e)return M.objectKeys(this.shape).map(n=>{M.objectKeys(e).indexOf(n)===-1?t[n]=this.shape[n]:t[n]=this.shape[n].optional()}),new k({...this._def,shape:()=>t});for(let n in this.shape){let s=this.shape[n];t[n]=s.optional()}return new k({...this._def,shape:()=>t})}required(){let e={};for(let t in this.shape){let s=this.shape[t];for(;s instanceof Q;)s=s._def.innerType;e[t]=s}return new k({...this._def,shape:()=>e})}};k.create=(r,e)=>new k({shape:()=>r,unknownKeys:"strip",catchall:J.create(),typeName:m.ZodObject,..._(e)});k.strictCreate=(r,e)=>new k({shape:()=>r,unknownKeys:"strict",catchall:J.create(),typeName:m.ZodObject,..._(e)});k.lazycreate=(r,e)=>new k({shape:r,unknownKeys:"strip",catchall:J.create(),typeName:m.ZodObject,..._(e)});var fe=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(o=>new z(o.ctx.common.issues));return y(t,{code:l.invalid_union,unionErrors:a}),g}if(t.common.async)return Promise.all(n.map(async i=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i,a=[];for(let u of n){let d={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let o=a.map(u=>new z(u));return y(t,{code:l.invalid_union,unionErrors:o}),g}}get options(){return this._def.options}};fe.create=(r,e)=>new fe({options:r,typeName:m.ZodUnion,..._(e)});var Ie=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.object)return y(t,{code:l.invalid_type,expected:p.object,received:t.parsedType}),g;let n=this.discriminator,s=t.data[n],i=this.options.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(y(t,{code:l.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[n]}),g)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,t,n){let s=new Map;try{t.forEach(i=>{let a=i.shape[e].value;s.set(a,i)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(s.size!==t.length)throw new Error("Some of the discriminator values are not unique");return new Ie({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:s,..._(n)})}};function gt(r,e){let t=ae(r),n=ae(e);if(r===e)return{valid:!0,data:r};if(t===p.object&&n===p.object){let s=M.objectKeys(e),i=M.objectKeys(r).filter(o=>s.indexOf(o)!==-1),a={...r,...e};for(let o of i){let u=gt(r[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(t===p.array&&n===p.array){if(r.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<r.length;i++){let a=r[i],o=e[i],u=gt(a,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===p.date&&n===p.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var pe=class extends v{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(pt(i)||pt(a))return g;let o=gt(i.value,a.value);return o.valid?((yt(i)||yt(a))&&t.dirty(),{status:t.value,value:o.data}):(y(n,{code:l.invalid_intersection_types}),g)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};pe.create=(r,e,t)=>new pe({left:r,right:e,typeName:m.ZodIntersection,..._(t)});var $=class extends v{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return y(n,{code:l.invalid_type,expected:p.array,received:n.parsedType}),g;if(n.data.length<this._def.items.length)return y(n,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),g;!this._def.rest&&n.data.length>this._def.items.length&&(y(n,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),t.dirty());let i=n.data.map((a,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new P(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>N.mergeArray(t,a)):N.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new $({...this._def,rest:e})}};$.create=(r,e)=>new $({items:r,typeName:m.ZodTuple,rest:null,..._(e)});var ye=class extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.object)return y(n,{code:l.invalid_type,expected:p.object,received:n.parsedType}),g;let s=[],i=this._def.keyType,a=this._def.valueType;for(let o in n.data)s.push({key:i._parse(new P(n,o,n.path,o)),value:a._parse(new P(n,n.data[o],n.path,o))});return n.common.async?N.mergeObjectAsync(t,s):N.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof v?new ye({keyType:e,valueType:t,typeName:m.ZodRecord,..._(n)}):new ye({keyType:W.create(),valueType:e,typeName:m.ZodRecord,..._(t)})}},Ee=class extends v{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return y(n,{code:l.invalid_type,expected:p.map,received:n.parsedType}),g;let s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,u],d)=>({key:s._parse(new P(n,o,n.path,[d,"key"])),value:i._parse(new P(n,u,n.path,[d,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let u of a){let d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return g;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(d.value,f.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let u of a){let d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return g;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(d.value,f.value)}return{status:t.value,value:o}}}};Ee.create=(r,e,t)=>new Ee({valueType:e,keyType:r,typeName:m.ZodMap,..._(t)});var Y=class extends v{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return y(n,{code:l.invalid_type,expected:p.set,received:n.parsedType}),g;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(y(n,{code:l.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(y(n,{code:l.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,message:s.maxSize.message}),t.dirty());let i=this._def.valueType;function a(u){let d=new Set;for(let f of u){if(f.status==="aborted")return g;f.status==="dirty"&&t.dirty(),d.add(f.value)}return{status:t.value,value:d}}let o=[...n.data.values()].map((u,d)=>i._parse(new P(n,u,n.path,d)));return n.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,t){return new Y({...this._def,minSize:{value:e,message:S.toString(t)}})}max(e,t){return new Y({...this._def,maxSize:{value:e,message:S.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Y.create=(r,e)=>new Y({valueType:r,minSize:null,maxSize:null,typeName:m.ZodSet,..._(e)});var K=class extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.function)return y(t,{code:l.invalid_type,expected:p.function,received:t.parsedType}),g;function n(o,u){return Ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$e,Ve].filter(d=>!!d),issueData:{code:l.invalid_arguments,argumentsError:u}})}function s(o,u){return Ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$e,Ve].filter(d=>!!d),issueData:{code:l.invalid_return_type,returnTypeError:u}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof ue?O(async(...o)=>{let u=new z([]),d=await this._def.args.parseAsync(o,i).catch(w=>{throw u.addIssue(n(o,w)),u}),f=await a(...d);return await this._def.returns._def.type.parseAsync(f,i).catch(w=>{throw u.addIssue(s(f,w)),u})}):O((...o)=>{let u=this._def.args.safeParse(o,i);if(!u.success)throw new z([n(o,u.error)]);let d=a(...u.data),f=this._def.returns.safeParse(d,i);if(!f.success)throw new z([s(d,f.error)]);return f.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new K({...this._def,args:$.create(e).rest(D.create())})}returns(e){return new K({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}};K.create=(r,e,t)=>new K({args:r?r.rest(D.create()):$.create([]).rest(D.create()),returns:e||D.create(),typeName:m.ZodFunction,..._(t)});var Ae=class extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Ae.create=(r,e)=>new Ae({getter:r,typeName:m.ZodLazy,..._(e)});var Ne=class extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return y(t,{code:l.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ne.create=(r,e)=>new Ne({value:r,typeName:m.ZodLiteral,..._(e)});function Cr(r,e){return new Oe({values:r,typeName:m.ZodEnum,..._(e)})}var Oe=class extends v{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return y(t,{expected:M.joinValues(n),received:t.parsedType,code:l.invalid_type}),g}if(this._def.values.indexOf(e.data)===-1){let t=this._getOrReturnCtx(e),n=this._def.values;return y(t,{received:t.data,code:l.invalid_enum_value,options:n}),g}return O(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}};Oe.create=Cr;var Re=class extends v{_parse(e){let t=M.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){let s=M.objectValues(t);return y(n,{expected:M.joinValues(s),received:n.parsedType,code:l.invalid_type}),g}if(t.indexOf(e.data)===-1){let s=M.objectValues(t);return y(n,{received:n.data,code:l.invalid_enum_value,options:s}),g}return O(e.data)}get enum(){return this._def.values}};Re.create=(r,e)=>new Re({values:r,typeName:m.ZodNativeEnum,..._(e)});var ue=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&t.common.async===!1)return y(t,{code:l.invalid_type,expected:p.promise,received:t.parsedType}),g;let n=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return O(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}};ue.create=(r,e)=>new ue({type:r,typeName:m.ZodPromise,..._(e)});var L=class extends v{innerType(){return this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){let a=s.transform(n.data);return n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}let i={addIssue:a=>{y(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){let a=o=>{let u=s.refinement(o,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Xe(a))return a;let o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Xe(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);M.assertNever(s)}};L.create=(r,e,t)=>new L({schema:r,typeName:m.ZodEffects,effect:e,..._(t)});L.createWithPreprocess=(r,e,t)=>new L({schema:e,effect:{type:"preprocess",transform:r},typeName:m.ZodEffects,..._(t)});var Q=class extends v{_parse(e){return this._getType(e)===p.undefined?O(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Q.create=(r,e)=>new Q({innerType:r,typeName:m.ZodOptional,..._(e)});var ee=class extends v{_parse(e){return this._getType(e)===p.null?O(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ee.create=(r,e)=>new ee({innerType:r,typeName:m.ZodNullable,..._(e)});var Le=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Le.create=(r,e)=>new Q({innerType:r,typeName:m.ZodOptional,..._(e)});var Fe=class extends v{_parse(e){if(this._getType(e)!==p.nan){let n=this._getOrReturnCtx(e);return y(n,{code:l.invalid_type,expected:p.nan,received:n.parsedType}),g}return{status:"valid",value:e.data}}};Fe.create=r=>new Fe({typeName:m.ZodNaN,..._(r)});var zt=(r,e={},t)=>r?oe.create().superRefine((n,s)=>{if(!r(n)){let i=typeof e=="function"?e(n):e,a=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...a,fatal:t})}}):oe.create(),Qr={object:k.lazycreate},m;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodPromise="ZodPromise"})(m||(m={}));var Pr=(r,e={message:`Input not instance of ${r.name}`})=>zt(t=>t instanceof r,e,!0),Bt=W.create,Dt=X.create,Vr=Fe.create,$r=be.create,Wt=xe.create,Lr=Se.create,jr=Te.create,Ur=ke.create,Zr=oe.create,zr=D.create,Br=J.create,Dr=Me.create,Wr=V.create,Jr=k.create,Hr=k.strictCreate,Gr=fe.create,Xr=Ie.create,Yr=pe.create,Kr=$.create,en=ye.create,tn=Ee.create,rn=Y.create,nn=K.create,sn=Ae.create,an=Ne.create,on=Oe.create,un=Re.create,cn=ue.create,Zt=L.create,dn=Q.create,hn=ee.create,ln=L.createWithPreprocess,fn=()=>Bt().optional(),pn=()=>Dt().optional(),yn=()=>Wt().optional(),h=Object.freeze({__proto__:null,getParsedType:ae,ZodParsedType:p,makeIssue:Ge,EMPTY_PATH:Ar,addIssueToContext:y,ParseStatus:N,INVALID:g,DIRTY:Nr,OK:O,isAborted:pt,isDirty:yt,isValid:Xe,isAsync:mt,ZodType:v,ZodString:W,ZodNumber:X,ZodBigInt:be,ZodBoolean:xe,ZodDate:Se,ZodUndefined:Te,ZodNull:ke,ZodAny:oe,ZodUnknown:D,ZodNever:J,ZodVoid:Me,ZodArray:V,get objectUtil(){return Ye},ZodObject:k,ZodUnion:fe,ZodDiscriminatedUnion:Ie,ZodIntersection:pe,ZodTuple:$,ZodRecord:ye,ZodMap:Ee,ZodSet:Y,ZodFunction:K,ZodLazy:Ae,ZodLiteral:Ne,ZodEnum:Oe,ZodNativeEnum:Re,ZodPromise:ue,ZodEffects:L,ZodTransformer:L,ZodOptional:Q,ZodNullable:ee,ZodDefault:Le,ZodNaN:Fe,custom:zt,Schema:v,ZodSchema:v,late:Qr,get ZodFirstPartyTypeKind(){return m},any:Zr,array:Wr,bigint:$r,boolean:Wt,date:Lr,discriminatedUnion:Xr,effect:Zt,enum:on,function:nn,instanceof:Pr,intersection:Yr,lazy:sn,literal:an,map:tn,nan:Vr,nativeEnum:un,never:Br,null:Ur,nullable:hn,number:Dt,object:Jr,oboolean:yn,onumber:pn,optional:dn,ostring:fn,preprocess:ln,promise:cn,record:en,set:rn,strictObject:Hr,string:Bt,transformer:Zt,tuple:Kr,undefined:jr,union:Gr,unknown:zr,void:Dr,ZodIssueCode:l,quotelessJson:Ir,ZodError:z,defaultErrorMap:Ve,get overrideErrorMap(){return $e},setErrorMap:Er});var Ce=h.lazy(()=>h.union([h.string(),h.number(),h.boolean(),h.null(),h.array(Ce),h.record(Ce)])),mn=h.string().refine(r=>tt.byteLength(r)==8).transform(r=>{let e=tt.toByteArray(r);return he.fromBytesLE(Array.from(e),!0)}),qe=h.number().int().nonnegative(),Jt=h.number().int().nonnegative(),vt=h.number().int().nonnegative(),Ke=h.number().int().nonnegative(),gn=h.object({type:h.literal("Connect"),sessionId:h.string(),connectionCount:h.number().int().nonnegative()}),vn=h.object({type:h.literal("Add"),queryId:qe,udfPath:h.string(),args:h.array(Ce)}),wn=h.object({type:h.literal("Remove"),queryId:qe}),_n=h.object({type:h.literal("ModifyQuerySet"),baseVersion:Jt,newVersion:Jt,modifications:h.array(h.union([vn,wn]))}),bn=h.object({type:h.literal("Mutation"),mutationId:vt,udfPath:h.string(),args:h.array(Ce)}),xn=h.discriminatedUnion("tokenType",[h.object({type:h.literal("Authenticate"),tokenType:h.literal("Admin"),value:h.string(),baseVersion:Ke}),h.object({type:h.literal("Authenticate"),tokenType:h.literal("User"),value:h.string(),baseVersion:Ke}),h.object({type:h.literal("Authenticate"),tokenType:h.literal("None"),baseVersion:Ke})]),vs=h.union([gn,_n,bn,xn]),Gt=mn,et=h.array(h.string()),Ht=h.object({querySet:qe,ts:Gt,identity:Ke}),Sn=h.discriminatedUnion("type",[h.object({type:h.literal("QueryUpdated"),queryId:qe,value:Ce,logLines:et}),h.object({type:h.literal("QueryFailed"),queryId:qe,errorMessage:h.string(),logLines:et}),h.object({type:h.literal("QueryRemoved"),queryId:qe})]),Tn=h.object({type:h.literal("Transition"),startVersion:Ht,endVersion:Ht,modifications:h.array(Sn)}),kn=h.object({type:h.literal("MutationResponse"),mutationId:vt,success:h.literal(!0),result:Ce,ts:Gt,logLines:et}),Mn=h.object({type:h.literal("MutationResponse"),mutationId:vt,success:h.literal(!1),result:h.string(),logLines:et}),In=h.discriminatedUnion("success",[kn,Mn]),En=h.object({type:h.literal("FatalError"),error:h.string()}),Xt=h.union([Tn,In,En]);var An=1e3,Nn=1005;function Yt(){let r;return{promise:new Promise(t=>{r=t}),resolve:r}}var rt=class{constructor(e,t,n,s){this.webSocketConstructor=s,this.socket={state:"disconnected"},this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.closedUnexpectedly=!1,this.uri=e,this.onOpen=t,this.onMessage=n,this.connect()}async connect(){if(this.socket.state==="closing"||this.socket.state==="stopping"||this.socket.state==="stopped")return;if(this.socket.state!=="disconnected")throw new Error("Didn't start connection from disconnected state");let e=new this.webSocketConstructor(this.uri);this.socket={state:"connecting",ws:e},e.onopen=()=>{if(this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e},this.closedUnexpectedly||(this.retries=0),this.onOpen()},e.onerror=t=>{let n=t.message;console.log(`WebSocket error: ${n}`),this.closeAndReconnect()},e.onmessage=t=>{this.closedUnexpectedly&&(this.closedUnexpectedly=!1,this.retries=0);try{let n=Xt.parse(JSON.parse(t.data));this.onMessage(n)}catch(n){throw console.log(`Failed to process server message, reconnecting: ${n}`),this.closeAndReconnect(),n}},e.onclose=t=>{if(t.code!==An&&t.code!==Nn){let s=`WebSocket closed unexpectedly with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),console.error(s),this.closedUnexpectedly=!0}if(this.socket.state==="stopping"){this.socket.promisePair.resolve(null),this.socket={state:"stopped"};return}this.socket={state:"disconnected"};let n=this.nextBackoff();console.log(`Attempting reconnect in ${n}ms`),setTimeout(()=>this.connect(),n)}}sendMessage(e){if(this.socket.state==="ready"){let t=JSON.stringify(e);try{this.socket.ws.send(t)}catch(n){console.log(`Failed to send message on WebSocket, reconnecting: ${n}`),this.closeAndReconnect()}}}closeAndReconnect(){switch(this.socket.state){case"disconnected":case"closing":case"stopping":case"stopped":return;case"connecting":case"ready":this.socket.ws.close(),this.socket={state:"closing"};return;default:{let e=this.socket}}}async stop(){switch(this.socket.state){case"stopped":return;case"connecting":case"ready":this.socket.ws.close(),this.socket={state:"stopping",promisePair:Yt()},await this.socket.promisePair.promise;return;case"closing":this.socket={state:"stopping",promisePair:Yt()},await this.socket.promisePair.promise;return;case"disconnected":this.socket={state:"stopped"};return;case"stopping":await this.socket.promisePair.promise;return;default:{let e=this.socket}}}nextBackoff(){let e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;let t=Math.min(e,this.maxBackoff),n=t*(Math.random()-.5);return t+n}};var nt,On=new Uint8Array(16);function wt(){if(!nt&&(nt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nt(On)}var Kt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rn(r){return typeof r=="string"&&Kt.test(r)}var er=Rn;var E=[];for(st=0;st<256;++st)E.push((st+256).toString(16).substr(1));var st;function Fn(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(E[r[e+0]]+E[r[e+1]]+E[r[e+2]]+E[r[e+3]]+"-"+E[r[e+4]]+E[r[e+5]]+"-"+E[r[e+6]]+E[r[e+7]]+"-"+E[r[e+8]]+E[r[e+9]]+"-"+E[r[e+10]]+E[r[e+11]]+E[r[e+12]]+E[r[e+13]]+E[r[e+14]]+E[r[e+15]]).toLowerCase();if(!er(t))throw TypeError("Stringified UUID is invalid");return t}var tr=Fn;function qn(r,e,t){r=r||{};var n=r.random||(r.rng||wt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return tr(n)}var _t=qn;var Cn={unsavedChangesWarning:!0},it=class{constructor(e,t,n){n={...Cn,...n};let s=n.webSocketConstructor;if(!s&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");s=s||WebSocket;let i=e.search("://");if(i==-1)throw new Error("Provided address was not an absolute URL.");let a=e.substring(i+3),o=e.substring(0,i),u;if(o==="http")u="ws";else if(o==="https")u="wss";else throw new Error(`Unknown parent protocol ${o}`);let d=`${u}://${a}/api/${St}/sync`;this.state=new De,this.remoteQuerySet=new Pe(b=>this.state.queryPath(b)),this.mutationManager=new We,this.optimisticQueryResults=new He,this.onTransition=t,this.nextMutationId=0,this.sessionId=_t(),this.connectionCount=0;let{unsavedChangesWarning:f}=n;if(typeof window>"u"&&f)throw new Error("unsavedChangesWarning enabled, but no window object found! Navigating away from the page could cause in-flight mutations to be dropped. Pass {unsavedChangesWarning: false} in Convex client options to disable this feature.");f&&window.addEventListener("beforeunload",b=>{if(this.mutationManager.hasUncommittedMutations()){b.preventDefault();let w="Are you sure you want to leave? Your changes may not be saved.";return(b||window.event).returnValue=w,w}}),this.webSocketManager=new rt(d,()=>{this.webSocketManager.sendMessage({type:"Connect",sessionId:this.sessionId,connectionCount:this.connectionCount}),this.connectionCount+=1,this.remoteQuerySet=new Pe(I=>this.state.queryPath(I));let[b,w]=this.state.restart();w&&this.webSocketManager.sendMessage(w),this.webSocketManager.sendMessage(b);for(let I of this.mutationManager.restart())this.webSocketManager.sendMessage(I)},b=>{if(b.type=="Transition"){this.remoteQuerySet.transition(b);let w=this.mutationManager.removeCompletedMutations(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(w)}else if(b.type=="MutationResponse"){let w=this.mutationManager.onResponse(b);w&&this.notifyOnQueryResultChanges(new Set([w]))}else if(b.type=="FatalError"){let w=Lt(b.error);throw this.webSocketManager.stop(),w}},s)}notifyOnQueryResultChanges(e){let t=this.remoteQuerySet.remoteQueryResults(),n=new Map;for(let[s,i]of t){let a=this.state.queryToken(s);if(a!==null){let o={result:i,udfPath:this.state.queryPath(s),args:this.state.queryArgs(s)};n.set(a,o)}}this.onTransition(this.optimisticQueryResults.ingestQueryResultsFromServer(n,e))}setAuth(e){let t=this.state.setAuth(e);this.webSocketManager.sendMessage(t)}setAdminAuth(e){let t=this.state.setAdminAuth(e);this.webSocketManager.sendMessage(t)}clearAuth(){let e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t){let{modification:n,queryToken:s,unsubscribe:i}=this.state.subscribe(e,t);return n!==null&&this.webSocketManager.sendMessage(n),{queryToken:s,unsubscribe:()=>{let a=i();a&&this.webSocketManager.sendMessage(a)}}}localQueryResult(e,t){let n=ie(e,t);return this.optimisticQueryResults.queryResult(n)}async mutate(e,t,n=null){let s=this.nextMutationId;if(this.nextMutationId++,n!==null){let o=d=>{n(d,...t)},u=this.optimisticQueryResults.applyOptimisticUpdate(o,s);this.onTransition(u)}let{message:i,result:a}=this.mutationManager.request(e,t,s);return this.webSocketManager.sendMessage(i),a}async close(){return this.webSocketManager.stop()}};var Pn=typeof window<"u"&&typeof window.fetch<"u",sr=Pn?window.fetch:(...r)=>Promise.resolve().then(()=>ot(nr(),1)).then(({default:e})=>e(...r)),at=class{constructor(e){this.address=`${e}/api/${lt}`}backendUrl(){return this.address}setAuth(e){this.auth=e}clearAuth(){this.auth=void 0}query(e){return async(...t)=>{let n=JSON.stringify(Z(t)),s=encodeURIComponent(n),i=`${this.address}/udf?path=${e}&args=${s}`,a=this.auth?{Authorization:`Bearer ${this.auth}`}:{},o=await sr(i,{credentials:"include",headers:a});if(!o.ok&&o.status!=ft)throw new Error(await o.text());let u=await o.json(),d=se(u.value);for(let f of u.logs)G("info","query",e,f);if(!u.success)throw le("query",e,d);return d}}mutation(e){return async(...t)=>{let n=JSON.stringify({path:e,args:Z(t),tokens:[]}),s={"Content-Type":"application/json"};this.auth&&(s.Authorization=`Bearer ${this.auth}`);let i=await sr(`${this.address}/udf`,{body:n,method:"POST",headers:s,credentials:"include"});if(!i.ok&&i.status!=ft)throw new Error(await i.text());let a=await i.json(),o=se(a.value);for(let u of a.logs)G("info","mutation",e,u);if(!a.success)throw le("mutation",e,o);return o}}};return hr(Vn);})();
/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
//# sourceMappingURL=index.bundle.js.map
